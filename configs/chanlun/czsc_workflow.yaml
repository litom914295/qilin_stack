qlib_init:
  provider_uri: "~/.qlib/qlib_data/cn_data"
  region: cn

market: csi300
benchmark: SH000300

data_handler_config: &data_handler_config
  start_time: 2020-01-01
  end_time: 2023-12-31
  fit_start_time: 2020-01-01
  fit_end_time: 2022-12-31
  instruments: csi300

task:
  model:
    class: LGBModel
    module_path: qlib.contrib.model.gbdt
    kwargs:
      loss: binary
      num_leaves: 128
      learning_rate: 0.05
      n_estimators: 200
      colsample_bytree: 0.8
      subsample: 0.8
      max_depth: 8
      min_child_samples: 50
      verbose: -1

  dataset:
    class: DatasetH
    module_path: qlib.data.dataset
    kwargs:
      handler:
        class: CzscChanLunHandler
        module_path: qlib_enhanced.chanlun.czsc_handler
        kwargs:
          <<: *data_handler_config
          freq: day
          drop_raw: false
      
      segments:
        train: [2020-01-01, 2021-12-31]
        valid: [2022-01-01, 2022-06-30]
        test: [2022-07-01, 2023-12-31]

strategy:
  class: TopkDropoutStrategy
  module_path: qlib.contrib.strategy
  kwargs:
    signal: <PRED>
    topk: 50
    n_drop: 5

backtest:
  start_time: 2022-07-01
  end_time: 2023-12-31
  account: 100000000
  benchmark: SH000300
  exchange_kwargs:
    limit_threshold: 0.095
    deal_price: close
    open_cost: 0.0005
    close_cost: 0.0015
    min_cost: 5
