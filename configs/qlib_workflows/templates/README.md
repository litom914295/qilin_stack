# Qlib工作流模板库

## 📚 模板总览

当前共有 **11** 个可用模板，覆盖机器学习、深度学习、集成学习和专用策略。

## 机器学习模板 (7个)

### 1. lightgbm_alpha158.yaml ⭐
**推荐新手使用**
- **模型**: LightGBM
- **特征**: Alpha158 (158个因子)
- **难度**: ⭐
- **特点**: 最常用的基准模型，训练快速，效果稳定
- **推荐场景**: 快速验证想法、建立baseline

### 2. lightgbm_alpha360_enhanced.yaml ⭐⭐
**增强版，性能更强**
- **模型**: LightGBM
- **特征**: Alpha360 (360个因子)
- **难度**: ⭐⭐
- **特点**: 调优的超参数，更多特征，更强表现力
- **推荐场景**: 追求更高性能、有充足计算资源

### 3. xgboost_alpha158.yaml ⭐
**经典梯度提升树**
- **模型**: XGBoost
- **特征**: Alpha158
- **难度**: ⭐
- **特点**: 鲁棒性强，适合对比实验
- **推荐场景**: 与LightGBM对比、集成学习基模型

### 4. xgboost_alpha360.yaml ⭐⭐
**XGBoost增强版**
- **模型**: XGBoost
- **特征**: Alpha360
- **难度**: ⭐⭐
- **特点**: 更深的树，更精细的正则化
- **推荐场景**: 需要更强表达能力的场景

### 5. catboost_alpha360.yaml ⭐⭐
**类别特征处理专家**
- **模型**: CatBoost
- **特征**: Alpha360
- **难度**: ⭐⭐
- **特点**: 自动处理类别特征，对抗过拟合
- **推荐场景**: 数据包含类别特征、需要强泛化能力

### 6. catboost_alpha158_tuned.yaml ⭐⭐
**CatBoost调优版**
- **模型**: CatBoost
- **特征**: Alpha158
- **难度**: ⭐⭐
- **特点**: 精细调整的参数，包含early stopping
- **推荐场景**: 追求最优CatBoost性能

### 7. randomforest_alpha158.yaml ⭐
**随机森林基准**
- **模型**: Random Forest
- **特征**: Alpha158
- **难度**: ⭐
- **特点**: 训练并行，容易理解，适合ensemble
- **推荐场景**: 快速baseline、集成学习组件

---

## 深度学习模板 (开发中)

### 8. gru_alpha158.yaml ⭐⭐⭐
**门控循环单元**
- **模型**: GRU
- **特征**: Alpha158
- **难度**: ⭐⭐⭐
- **状态**: 🚧 开发中
- **特点**: 捕捉时序特征，需要GPU
- **推荐场景**: 关注时间序列依赖

### 9. lstm_alpha360.yaml ⭐⭐⭐
**长短期记忆网络**
- **模型**: LSTM
- **特征**: Alpha360
- **难度**: ⭐⭐⭐
- **状态**: 🚧 开发中
- **特点**: 强大的时序建模能力
- **推荐场景**: 复杂时序模式

### 10. transformer_alpha158.yaml ⭐⭐⭐⭐
**Transformer注意力机制**
- **模型**: Transformer
- **特征**: Alpha158
- **难度**: ⭐⭐⭐⭐
- **状态**: 🚧 开发中
- **特点**: 最新架构，捕捉全局依赖
- **推荐场景**: 前沿研究，充足算力

---

## 集成学习模板 (计划中)

### 11. double_ensemble.yaml ⭐⭐⭐
**双重集成**
- **模型**: DoubleEnsemble
- **特征**: Alpha158
- **状态**: 📋 计划中
- **特点**: 训练集和验证集双重ensemble
- **推荐场景**: 追求极致性能

### 12. stacking_ensemble.yaml ⭐⭐⭐
**Stacking策略**
- **模型**: Stacking (LGB+XGB+Cat)
- **特征**: Alpha158/360
- **状态**: 📋 计划中
- **特点**: 多模型堆叠，互补优势
- **推荐场景**: 竞赛、生产环境

---

## 一进二专用模板

### 13. limitup_yinjiner_strategy.yaml ⭐⭐⭐⭐ ✅
**一进二涨停策略（已完成）**
- **模型**: LightGBM Regressor
- **特征**: 涨停板专用特征（24个Alpha因子）
- **难度**: ⭐⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 4种标签定义（经典一进二、强势一进二、连续涨停、开板反包）
  - 完整特征工程（价格、量能、涨停强度、开板特征）
  - 一进二专用指标（命中率、隔日跳空、成交可得性）
  - T+2持仓策略，考虑开板成本
  - 风险控制（止损止盈、连续涨停限制）
- **推荐场景**: 涨停板打板策略、一进二选股

### 14. limitup_classifier.yaml ⭐⭐⭐ ✅
**涨停板分类模型**
- **模型**: LightGBM Classifier
- **特征**: Alpha158 + 涨停板专用特征
- **难度**: ⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 二分类预测明日是否涨停
  - AUC作为评估指标
  - Top30概率最高的股票
- **推荐场景**: 涨停预测、打板策略

### 15. limitup_ranker.yaml ⭐⭐⭐ ✅
**涨停板排序模型**
- **模型**: XGBoost Regressor
- **特征**: Alpha360 + 涨停板排序特征
- **难度**: ⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 对多个候选涨停板排序
  - 次日收益率作为标签
  - CSI500股票池 + Top50策略
- **推荐场景**: 选择最优打板标的

### 16. limitup_consecutive.yaml ⭐⭐⭐ ✅
**连板预测模型**
- **模型**: CatBoost Classifier
- **特征**: Alpha158
- **难度**: ⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 预测今日涨停且明日继续涨停
  - Top20精选连板股
  - GPU加速训练
- **推荐场景**: 连板策略、龙头战法

### 17. limitup_timing.yaml ⭐⭐⭐⭐ ✅
**打板时机模型**
- **模型**: ALSTM (Attention LSTM)
- **特征**: Alpha158
- **难度**: ⭐⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 预测最佳打板时机（次日不破板）
  - LSTM注意力机制捕捉时序特征
  - Top25打板时机
- **推荐场景**: 涨停板打板、时机选择

### 18. limitup_ensemble.yaml ⭐⭐⭐⭐ ✅
**一进二综合策略**
- **模型**: LightGBM Ensemble
- **特征**: Alpha360
- **难度**: ⭐⭐⭐⭐
- **状态**: ✅ 已完成
- **特点**: 
  - 综合多个模型的集成策略
  - 高参数调优版本
  - Top40综合评分
- **推荐场景**: 生产环境、追求极致性能

---

## 📖 使用指南

### 基本使用
1. 进入"Qlib工作流"页面
2. 在"配置编辑器"中选择"从模板创建"
3. 从下拉列表选择模板
4. 点击"加载模板"
5. 可选：使用"快速参数调整"微调参数
6. 在"执行工作流"标签运行

### 修改模板
模板文件为标准YAML格式，可以直接编辑：
- 修改数据时间范围
- 调整模型超参数
- 更改回测策略参数
- 切换股票池和基准

### 创建自定义模板
1. 复制现有模板文件
2. 修改模型和参数配置
3. 保存到templates目录
4. 在UI中上传使用

---

## 🎯 模板选择指南

### 快速开始
- 新手 → `lightgbm_alpha158.yaml`
- 进阶 → `lightgbm_alpha360_enhanced.yaml`

### 对比实验
- LightGBM vs XGBoost → 使用相同特征模板
- Alpha158 vs Alpha360 → 使用相同模型模板

### 性能追求
1. 先用Alpha158快速验证
2. 再用Alpha360提升性能
3. 尝试ensemble组合多个模型

### 算力考虑
- 有限算力 → 使用Alpha158模板
- 充足算力 → 使用Alpha360或深度学习
- GPU可用 → 尝试深度学习模板

---

## 📊 性能基准

基于历史数据的参考指标（仅供参考）：

| 模板 | IC | ICIR | 年化收益 | 最大回撤 |
|------|-------|--------|---------|----------|
| LightGBM + Alpha158 | 0.05 | 1.8 | 15% | -12% |
| LightGBM + Alpha360 | 0.06 | 2.0 | 18% | -10% |
| XGBoost + Alpha158 | 0.048 | 1.7 | 14% | -13% |
| XGBoost + Alpha360 | 0.058 | 1.9 | 17% | -11% |
| CatBoost + Alpha360 | 0.062 | 2.1 | 19% | -9% |
| RandomForest + Alpha158 | 0.042 | 1.5 | 12% | -14% |

**注意**: 实际效果取决于市场环境、数据质量和参数设置。

---

## 🔧 故障排除

### 模板加载失败
- 检查模板文件是否存在
- 验证YAML语法是否正确
- 查看错误日志

### 训练失败
- 确认Qlib已初始化
- 检查数据路径正确
- 验证模型依赖已安装

### 性能不佳
- 调整时间范围
- 优化模型超参数
- 尝试不同特征集

---

## 📝 更新日志

### v1.0.0 (2024-11-07)
- ✅ 添加7个机器学习模板
- ✅ 完整的参数配置
- ✅ 详细的模板文档

### v1.1.0 (2025-11-08)
- ✅ **完成所有6个一进二专用模板**
  - ✅ `limitup_yinjiner_strategy.yaml` - 一进二涨停策略（推荐）
  - ✅ `limitup_classifier.yaml` - 涨停板分类模型
  - ✅ `limitup_ranker.yaml` - 涨停板排序模型
  - ✅ `limitup_consecutive.yaml` - 连板预测模型
  - ✅ `limitup_timing.yaml` - 打板时机模型
  - ✅ `limitup_ensemble.yaml` - 一进二综合策略
- ✅ 涵盖LightGBM/XGBoost/CatBoost/ALSTM多种模型
- ✅ 完整风险控制和回测配置

### 计划中
- [ ] 深度学习模板完整实现
- [ ] 集成学习模板
- [ ] 高频策略模板

---

## 🤝 贡献

欢迎贡献新模板！

步骤：
1. 创建YAML配置文件
2. 测试确保可用
3. 添加到本文档
4. 提交PR

---

**模板库持续更新中...**
