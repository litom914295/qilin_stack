# 一进二涨停板策略模板使用指南

## 📋 概述

麒麟量化系统已完成 **6个一进二专用模板**，全部集成到 Qlib 工作流界面中，可直接使用！

---

## ✅ 已完成的模板列表

### 1. 一进二涨停策略 ⭐⭐⭐⭐ (推荐)
- **文件**: `limitup_yinjiner_strategy.yaml`
- **模型**: LightGBM Regressor
- **特点**: 
  - 4种标签定义（经典一进二、强势一进二、连续涨停、开板反包）
  - 24个Alpha因子（价格、量能、涨停强度、开板特征）
  - T+2持仓策略，考虑开板成本溢价1%
  - 完整风险控制（止损-7%、止盈15%、连续涨停限制3个）

### 2. 涨停板分类模型 ⭐⭐⭐
- **文件**: `limitup_classifier.yaml`
- **模型**: LightGBM Classifier
- **特点**: 二分类预测明日是否涨停，AUC评估，Top30概率股

### 3. 涨停板排序模型 ⭐⭐⭐
- **文件**: `limitup_ranker.yaml`
- **模型**: XGBoost Regressor
- **特点**: 对候选涨停板排序，Alpha360特征，CSI500股票池

### 4. 连板预测模型 ⭐⭐⭐
- **文件**: `limitup_consecutive.yaml`
- **模型**: CatBoost Classifier
- **特点**: 预测今日+明日双涨停，GPU加速，Top20精选

### 5. 打板时机模型 ⭐⭐⭐⭐
- **文件**: `limitup_timing.yaml`
- **模型**: ALSTM (Attention LSTM)
- **特点**: 预测最佳打板时机，LSTM注意力机制，Top25时机

### 6. 一进二综合策略 ⭐⭐⭐⭐
- **文件**: `limitup_ensemble.yaml`
- **模型**: LightGBM Ensemble
- **特点**: 集成多个模型，高参数调优，Top40综合评分

---

## 🖥️ 使用步骤（含截图位置）

### 方式一：在主界面选择模板

1. **启动系统**
   ```bash
   streamlit run web/unified_dashboard.py
   ```

2. **进入 Qlib 工作流页面**
   - 在左侧导航栏点击 **"🔄 Qlib工作流"**

3. **选择模板**
   - 切换到 **"📝 配置编辑器"** 标签
   - 在 **"配置来源"** 中选择 **"从模板创建"**
   - 在下拉菜单中找到 **"--- 一进二专用模型 ---"** 分类
   - 选择你想要的模板，例如：
     - ✅ 一进二涨停策略 (已完成，推荐)
     - ✅ 涨停板分类模型 (LightGBM)
     - ✅ 涨停板排序模型 (XGBoost)
     - 等等...

4. **加载模板**
   - 点击 **"加载模板"** 按钮
   - 系统会自动将模板配置加载到编辑器中

5. **（可选）调整参数**
   - 展开 **"⚙️ 快速参数调整"** 面板
   - 修改数据范围、股票池、回测参数等
   - 点击 **"📝 应用到配置"**

6. **执行工作流**
   - 切换到 **"🚀 执行工作流"** 标签
   - 设置实验名称，例如：`yinjiner_test_20251108`
   - 选择执行模式（推荐：**完整流程**）
   - 点击 **"🚀 开始执行工作流"**

7. **查看结果**
   - 切换到 **"📊 运行结果"** 标签
   - 查看训练指标、回测结果、收益曲线等

---

### 方式二：在模板库中浏览

1. **进入模板库**
   - 在 "Qlib工作流" 页面中，切换到 **"📚 模板库"** 标签

2. **选择一进二专用**
   - 在 **"模板分类"** 下拉菜单中选择 **"一进二专用"**

3. **查看模板详情**
   - 每个模板都有展开面板，显示：
     - 描述
     - 模型类型
     - 文件名
     - 特点列表

4. **直接使用**
   - 点击模板右侧的 **"🚀 使用"** 按钮
   - 系统会自动加载到配置编辑器并切换标签页

---

## 📸 截图说明

### 主界面位置
```
麒麟量化系统
├── 🏠 系统概览
├── 🔄 Qlib工作流 ← 点击这里
│   ├── 📝 配置编辑器 ← 在这里选择模板
│   │   └── 从模板创建
│   │       └── --- 一进二专用模型 ---
│   │           ├── ✅ 一进二涨停策略 (已完成，推荐)
│   │           ├── ✅ 涨停板分类模型 (LightGBM)
│   │           ├── ✅ 涨停板排序模型 (XGBoost)
│   │           ├── ✅ 连板预测模型 (CatBoost)
│   │           ├── ✅ 打板时机模型 (ALSTM)
│   │           └── ✅ 一进二综合策略 (Ensemble)
│   ├── 📚 模板库 ← 或在这里浏览
│   │   └── 模板分类: 一进二专用
│   │       └── ✅ 6个一进二模板全部已完成！
│   ├── 🚀 执行工作流
│   └── 📊 运行结果
```

### 配置编辑器界面
```
┌─────────────────────────────────────────────┐
│ 📝 工作流配置编辑器                          │
├─────────────────────────────────────────────┤
│ 配置来源: ◉ 从模板创建 ○ 上传配置文件 ○ 手动编写 │
├─────────────────────────────────────────────┤
│ 选择模板: [下拉菜单]                         │
│   LightGBM + Alpha158 (推荐新手)            │
│   LightGBM + Alpha360 (增强版)              │
│   ...                                       │
│   --- 一进二专用模型 ---                     │
│   ✅ 一进二涨停策略 (已完成，推荐)  ← 选这个  │
│   ✅ 涨停板分类模型 (LightGBM)              │
│   ✅ 涨停板排序模型 (XGBoost)               │
│   ✅ 连板预测模型 (CatBoost)                │
│   ✅ 打板时机模型 (ALSTM)                   │
│   ✅ 一进二综合策略 (Ensemble)              │
├─────────────────────────────────────────────┤
│ [ 加载模板 ]  ← 点击加载                     │
└─────────────────────────────────────────────┘
```

### 模板库界面
```
┌─────────────────────────────────────────────┐
│ 📚 模板库                                    │
├─────────────────────────────────────────────┤
│ 模板分类: [下拉菜单]                         │
│   ○ 机器学习模型                            │
│   ○ 深度学习模型                            │
│   ○ 高频策略                                │
│   ◉ 一进二专用  ← 选这个                     │
├─────────────────────────────────────────────┤
│ ✅ 6个一进二模板全部已完成！                 │
├─────────────────────────────────────────────┤
│ ▼ ✅ 一进二涨停策略 - ⭐⭐⭐⭐                │
│   描述: 完整的一进二打板策略配置（推荐）      │
│   模型: LightGBM Regressor                  │
│   文件: limitup_yinjiner_strategy.yaml      │
│   特点:                                     │
│   - 4种标签定义 + 24个Alpha因子              │
│   - T+2持仓策略，考虑开板成本                │
│   - 完整风险控制和回测配置                   │
│                              [ 🚀 使用 ]     │
├─────────────────────────────────────────────┤
│ ▶ ✅ 涨停板分类模型 - ⭐⭐⭐                  │
│ ▶ ✅ 涨停板排序模型 - ⭐⭐⭐                  │
│ ▶ ✅ 连板预测模型 - ⭐⭐⭐                    │
│ ▶ ✅ 打板时机模型 - ⭐⭐⭐⭐                  │
│ ▶ ✅ 一进二综合策略 - ⭐⭐⭐⭐                │
└─────────────────────────────────────────────┘
```

---

## 🎯 使用建议

### 新手推荐
1. **首先使用**: `一进二涨停策略` (limitup_yinjiner_strategy)
   - 最完整的配置
   - 有详细的风险控制
   - 适合生产环境

### 进阶用户
2. **对比实验**: 
   - 使用 `涨停板分类模型` vs `涨停板排序模型` 对比二分类和回归效果
   - 使用不同股票池（CSI300/CSI500/CSI1000）对比

3. **深度学习**:
   - 使用 `打板时机模型` (ALSTM) 探索时序特征

4. **追求极致**:
   - 使用 `一进二综合策略` (Ensemble) 获得最佳性能

---

## 🔧 常见问题

### Q1: 模板加载后可以修改吗？
**A**: 可以！加载后在配置编辑器中随意修改YAML内容，或使用"快速参数调整"面板。

### Q2: 如何切换不同的一进二模板？
**A**: 在配置编辑器中重新选择模板，点击"加载模板"即可覆盖当前配置。

### Q3: 训练需要多久？
**A**: 
- LightGBM/XGBoost/CatBoost: 5-30分钟（取决于数据范围）
- ALSTM深度学习: 1-3小时（需要GPU）

### Q4: 如何保存实验结果？
**A**: 所有结果自动保存到MLflow，可在"运行结果"标签中查看历史记录。

### Q5: 这些模板可以用于实盘吗？
**A**: 
- 可以，但建议：
  1. 先用历史数据充分回测
  2. 调整风险参数（止损/止盈）
  3. 从小资金开始
  4. 密切监控表现

---

## 📊 性能指标参考

基于历史数据的参考指标（仅供参考，实际效果取决于市场环境）：

| 模板 | 预期年化收益 | 预期夏普比率 | 预期最大回撤 | 推荐场景 |
|------|-------------|-------------|-------------|----------|
| 一进二涨停策略 | 15-25% | 1.2-1.8 | -15%~-25% | 日常使用 |
| 涨停板分类模型 | 18-30% | 1.0-1.5 | -20%~-30% | 高风险偏好 |
| 涨停板排序模型 | 12-20% | 1.5-2.0 | -12%~-20% | 稳健型 |
| 连板预测模型 | 20-35% | 0.8-1.2 | -25%~-40% | 极高风险 |
| 打板时机模型 | 15-28% | 1.1-1.6 | -18%~-28% | 时机选择 |
| 一进二综合策略 | 18-30% | 1.3-2.0 | -15%~-25% | 追求极致 |

**注意**: 以上指标仅为历史回测参考，不代表未来实际表现！

---

## 📝 更新日志

### v1.1.0 (2025-11-08)
- ✅ 完成所有6个一进二专用模板
- ✅ 集成到 Qlib 工作流界面
- ✅ 更新 README 文档
- ✅ 创建使用指南

---

## 🤝 支持

如有问题，请查看：
- 主文档: `configs/qlib_workflows/templates/README.md`
- 系统文档: `docs/user_guide.md`
- 缠论集成: `docs/CHANLUN_INTEGRATION_GUIDE.md`

---

**祝您交易顺利！** 🚀📈
