# æ‰©å±•åŠŸèƒ½é›†æˆæŒ‡å—

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-01-07  
**çŠ¶æ€**: 2/4 å®Œæˆ  

---

## ğŸ“ Web UI é›†æˆè·¯å¾„

æ‰€æœ‰æ‰©å±•åŠŸèƒ½å·²æ­£ç¡®é›†æˆåˆ° `unified_dashboard.py` ä¸­ï¼Œè®¿é—®è·¯å¾„å¦‚ä¸‹ï¼š

### 1. æ¨¡å‹åº“æ‰©å±• âœ…

**å¯¼èˆªè·¯å¾„**:
```
ä¸»é¡µ â†’ ğŸ“¦ Qlib â†’ ğŸ“ˆ æ¨¡å‹è®­ç»ƒ â†’ ğŸ—‚ï¸ æ¨¡å‹åº“
```

**æ–‡ä»¶ä½ç½®**:
- å®ç°æ–‡ä»¶: `web/tabs/qlib_model_zoo_tab.py`
- æ¨¡å‹æ–‡ä»¶: `qlib_enhanced/model_zoo/models/`
  - `xgboost_model.py` (XGBoost)
  - `catboost_model.py` (CatBoost)
  - `pytorch_models.py` (MLP/LSTM/GRU/ALSTM/Transformer/TCN)

**é›†æˆä½ç½®**:
- `unified_dashboard.py` ç¬¬ 914-923 è¡Œ
- å‡½æ•°: `render_qlib_model_training_tab()` ç¬¬4ä¸ªå­æ ‡ç­¾

**ä½¿ç”¨æ–¹æ³•**:
1. å¯åŠ¨Webç•Œé¢: `streamlit run web/unified_dashboard.py`
2. ç‚¹å‡»å·¦ä¾§è¾¹æ  "ğŸ“¦ Qlib"
3. é€‰æ‹©é¡¶éƒ¨æ ‡ç­¾ "ğŸ“ˆ æ¨¡å‹è®­ç»ƒ"
4. é€‰æ‹©å­æ ‡ç­¾ "ğŸ—‚ï¸ æ¨¡å‹åº“"
5. é€‰æ‹©æ¨¡å‹ç±»å‹ â†’ é…ç½®å‚æ•° â†’ å¼€å§‹è®­ç»ƒ

---

### 2. å¾®è§‚ç»“æ„UIå¯è§†åŒ– âœ…

**å¯¼èˆªè·¯å¾„**:
```
ä¸»é¡µ â†’ ğŸ“¦ Qlib â†’ ğŸ’¼ æŠ•èµ„ç»„åˆ â†’ âš¡ é«˜é¢‘äº¤æ˜“ â†’ ğŸ”¬ å¾®è§‚ç»“æ„å¯è§†åŒ–
```

**æ–‡ä»¶ä½ç½®**:
- å®ç°æ–‡ä»¶: `web/tabs/qlib_microstructure_tab.py` (753è¡Œ)
- åç«¯æ”¯æŒ: `qlib_enhanced/high_frequency_engine.py`

**é›†æˆä½ç½®**:
- `qlib_highfreq_tab.py` ç¬¬ 35-45 è¡Œ
- ä½œä¸ºé«˜é¢‘äº¤æ˜“æ¨¡å—çš„ç¬¬4ä¸ªå­æ ‡ç­¾
- é€šè¿‡ `unified_dashboard.py` â†’ `render_qlib_portfolio_tab()` é—´æ¥è®¿é—®

**ä½¿ç”¨æ–¹æ³•**:
1. å¯åŠ¨Webç•Œé¢: `streamlit run web/unified_dashboard.py`
2. ç‚¹å‡»å·¦ä¾§è¾¹æ  "ğŸ“¦ Qlib"
3. é€‰æ‹©é¡¶éƒ¨æ ‡ç­¾ "ğŸ’¼ æŠ•èµ„ç»„åˆ"
4. é€‰æ‹©å­æ ‡ç­¾ "âš¡ é«˜é¢‘äº¤æ˜“"
5. é€‰æ‹©æœ€åä¸€ä¸ªå­æ ‡ç­¾ "ğŸ”¬ å¾®è§‚ç»“æ„å¯è§†åŒ–"
6. é€‰æ‹©åŠŸèƒ½:
   - ğŸ“Š è®¢å•ç°¿æ·±åº¦å›¾
   - ğŸ“ˆ ä»·å·®åˆ†æ
   - âš–ï¸ è®¢å•æµå¤±è¡¡
   - ğŸ¯ ç»¼åˆæŒ‡æ ‡

---

## ğŸ—‚ï¸ å®Œæ•´èœå•ç»“æ„

```
unified_dashboard.py
â”‚
â””â”€â”€ ğŸ“¦ Qlib (ä¸»èœå•)
    â”‚
    â”œâ”€â”€ ğŸ“ˆ æ¨¡å‹è®­ç»ƒ
    â”‚   â”œâ”€â”€ ğŸ§  åœ¨çº¿å­¦ä¹ 
    â”‚   â”œâ”€â”€ ğŸ¤– å¼ºåŒ–å­¦ä¹ 
    â”‚   â”œâ”€â”€ ğŸš€ ä¸€è¿›äºŒç­–ç•¥
    â”‚   â””â”€â”€ ğŸ—‚ï¸ æ¨¡å‹åº“ âœ¨ (æ‰©å±•åŠŸèƒ½1 - å·²é›†æˆ)
    â”‚       â””â”€â”€ 12ä¸ªæ¨¡å‹å¯ç”¨
    â”‚
    â”œâ”€â”€ ğŸ—„ï¸ æ•°æ®ç®¡ç†
    â”‚   â”œâ”€â”€ ğŸ”Œ å¤šæ•°æ®æº
    â”‚   â”œâ”€â”€ ğŸ”¥ æ¶¨åœæ¿åˆ†æ
    â”‚   â”œâ”€â”€ ğŸ¯ æ¶¨åœæ¿ç›‘æ§
    â”‚   â”œâ”€â”€ ğŸ§ª å› å­ç ”ç©¶
    â”‚   â”œâ”€â”€ ğŸ“Š ICåˆ†æ
    â”‚   â””â”€â”€ ğŸ› ï¸ æ•°æ®å·¥å…·
    â”‚
    â”œâ”€â”€ ğŸ’¼ æŠ•èµ„ç»„åˆ
    â”‚   â”œâ”€â”€ âª å›æµ‹
    â”‚   â”œâ”€â”€ ğŸ§­ ç»„åˆä¼˜åŒ–
    â”‚   â”œâ”€â”€ ğŸ“Š å½’å› åˆ†æ
    â”‚   â”œâ”€â”€ ğŸš€ è®¢å•æ‰§è¡Œ
    â”‚   â”œâ”€â”€ ğŸ† ç­–ç•¥å¯¹æ¯”
    â”‚   â””â”€â”€ âš¡ é«˜é¢‘äº¤æ˜“
    â”‚       â”œâ”€â”€ ğŸ“Š é«˜é¢‘å› å­åˆ†æ
    â”‚       â”œâ”€â”€ ğŸ¤– é«˜é¢‘ç­–ç•¥å›æµ‹
    â”‚       â”œâ”€â”€ ğŸ“ˆ 1åˆ†é’Ÿæ•°æ®ç®¡ç†
    â”‚       â””â”€â”€ ğŸ”¬ å¾®è§‚ç»“æ„å¯è§†åŒ– âœ¨ (æ‰©å±•åŠŸèƒ½2 - å·²é›†æˆ)
    â”‚           â”œâ”€â”€ ğŸ“Š è®¢å•ç°¿æ·±åº¦å›¾
    â”‚           â”œâ”€â”€ ğŸ“ˆ ä»·å·®åˆ†æ
    â”‚           â”œâ”€â”€ âš–ï¸ è®¢å•æµå¤±è¡¡
    â”‚           â””â”€â”€ ğŸ¯ ç»¼åˆæŒ‡æ ‡
    â”‚
    â”œâ”€â”€ âš ï¸ é£é™©æ§åˆ¶
    â”‚   â”œâ”€â”€ âš ï¸ é£é™©ç›‘æ§
    â”‚   â””â”€â”€ ğŸ”¥ å‹åŠ›æµ‹è¯•
    â”‚
    â”œâ”€â”€ ğŸ”„ åœ¨çº¿æœåŠ¡
    â”‚   â”œâ”€â”€ Model Serving
    â”‚   â””â”€â”€ æ»šåŠ¨è®­ç»ƒ
    â”‚
    â””â”€â”€ ğŸ“Š å®éªŒç®¡ç†
        â””â”€â”€ MLflowé›†æˆ
```

---

## ğŸ”§ ä»£ç é›†æˆè¯¦æƒ…

### æ¨¡å‹åº“æ‰©å±•é›†æˆä»£ç 

**ä½ç½®**: `unified_dashboard.py` ç¬¬ 914-923 è¡Œ

```python
def render_qlib_model_training_tab(self):
    """Qlib/æ¨¡å‹è®­ç»ƒï¼šåœ¨çº¿å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ã€æ¨¡å‹åº“"""
    sub1, sub2, sub3, sub4 = st.tabs([...])
    # ...
    with sub4:
        # é›†æˆQlibæ¨¡å‹åº“ï¼ˆPhase 5.1ï¼‰
        try:
            from web.tabs.qlib_model_zoo_tab import render_model_zoo_tab
            render_model_zoo_tab()
        except Exception as e:
            st.error(f"æ¨¡å‹åº“åŠ è½½å¤±è´¥: {e}")
```

### å¾®è§‚ç»“æ„UIé›†æˆä»£ç 

**ä½ç½®**: `qlib_highfreq_tab.py` ç¬¬ 18-45 è¡Œ

```python
def render_qlib_highfreq_tab():
    """æ¸²æŸ“é«˜é¢‘äº¤æ˜“æ ‡ç­¾é¡µ"""
    st.header("âš¡ é«˜é¢‘äº¤æ˜“å¼•æ“")
    
    # 4ä¸ªå­æ ‡ç­¾ï¼ˆæ·»åŠ å¾®è§‚ç»“æ„UIï¼‰
    tab1, tab2, tab3, tab4 = st.tabs([
        "ğŸ“Š é«˜é¢‘å› å­åˆ†æ",
        "ğŸ¤– é«˜é¢‘ç­–ç•¥å›æµ‹",
        "ğŸ“ˆ 1åˆ†é’Ÿæ•°æ®ç®¡ç†",
        "ğŸ”¬ å¾®è§‚ç»“æ„å¯è§†åŒ–"  # æ–°å¢
    ])
    
    # ...
    
    with tab4:
        # é›†æˆå¾®è§‚ç»“æ„UIï¼ˆPhase 6æ‰©å±•ï¼‰
        try:
            from web.tabs.qlib_microstructure_tab import render_microstructure_tab
            render_microstructure_tab()
        except Exception as e:
            st.error(f"å¾®è§‚ç»“æ„UIåŠ è½½å¤±è´¥: {e}")
```

**çˆ¶çº§è°ƒç”¨**: `unified_dashboard.py` ç¬¬ 996-1005 è¡Œ

```python
def render_qlib_portfolio_tab(self):
    """å…«åº“/æŠ•èµ„ç»„åˆï¼šå›æµ‹ã€ä¼˜åŒ–ã€å½’å› åˆ†æã€è®¢å•æ‰§è¡Œã€ç­–ç•¥å¯¹æ¯”ã€é«˜é¢‘äº¤æ˜“"""
    sub1, sub2, sub3, sub4, sub5, sub6 = st.tabs([...])
    # ...
    with sub6:
        # é«˜é¢‘äº¤æ˜“æ¨¡å—ï¼ˆPhase 6.2ï¼‰
        try:
            from web.tabs.qlib_highfreq_tab import render_qlib_highfreq_tab
            render_qlib_highfreq_tab()  # è¿™é‡Œä¼šåŠ è½½å¾®è§‚ç»“æ„UI
        except Exception as e:
            st.error(f"é«˜é¢‘äº¤æ˜“æ¨¡å—åŠ è½½å¤±è´¥: {e}")
```

---

## ğŸ“¦ æ–‡ä»¶ä¾èµ–å…³ç³»

```
unified_dashboard.py (ä¸»å…¥å£)
â”‚
â”œâ”€â”€ æ¨¡å‹åº“æ‰©å±•
â”‚   â”œâ”€â”€ web/tabs/qlib_model_zoo_tab.py
â”‚   â””â”€â”€ qlib_enhanced/model_zoo/
â”‚       â”œâ”€â”€ model_registry.py
â”‚       â”œâ”€â”€ model_trainer.py
â”‚       â””â”€â”€ models/
â”‚           â”œâ”€â”€ xgboost_model.py
â”‚           â”œâ”€â”€ catboost_model.py
â”‚           â””â”€â”€ pytorch_models.py
â”‚
â””â”€â”€ å¾®è§‚ç»“æ„UI
    â”œâ”€â”€ web/tabs/qlib_highfreq_tab.py (äºŒçº§å…¥å£)
    â”‚   â””â”€â”€ web/tabs/qlib_microstructure_tab.py (ä¸‰çº§å®ç°)
    â””â”€â”€ qlib_enhanced/high_frequency_engine.py (åç«¯æ”¯æŒ)
```

---

## ğŸš€ å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•æ¨¡å‹åº“æ‰©å±•

```bash
# 1. å¯åŠ¨Webç•Œé¢
cd G:\test\qilin_stack
streamlit run web/unified_dashboard.py

# 2. æµè§ˆå™¨è®¿é—®
http://localhost:8501

# 3. å¯¼èˆªåˆ°æ¨¡å‹åº“
Qlib â†’ æ¨¡å‹è®­ç»ƒ â†’ æ¨¡å‹åº“

# 4. é€‰æ‹©æ¨¡å‹æµ‹è¯•
é€‰æ‹© "XGBoost" â†’ é…ç½®å‚æ•° â†’ å¼€å§‹è®­ç»ƒ
```

### æµ‹è¯•å¾®è§‚ç»“æ„UI

```bash
# 1. å¯åŠ¨Webç•Œé¢ï¼ˆåŒä¸Šï¼‰

# 2. å¯¼èˆªåˆ°å¾®è§‚ç»“æ„
Qlib â†’ æŠ•èµ„ç»„åˆ â†’ é«˜é¢‘äº¤æ˜“ â†’ å¾®è§‚ç»“æ„å¯è§†åŒ–

# 3. æµ‹è¯•å„ä¸ªåŠŸèƒ½
- è®¢å•ç°¿æ·±åº¦å›¾ â†’ ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
- ä»·å·®åˆ†æ â†’ ç”Ÿæˆä»·å·®æ•°æ®
- è®¢å•æµå¤±è¡¡ â†’ ç”Ÿæˆè®¢å•æµæ•°æ®
- ç»¼åˆæŒ‡æ ‡ â†’ è®¡ç®—å¾®è§‚ç»“æ„ä¿¡å·
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ¨¡å‹åº“æç¤ºä¾èµ–æœªå®‰è£…

**é—®é¢˜**: æç¤º "XGBoostæœªå®‰è£…" æˆ– "PyTorchæœªå®‰è£…"

**è§£å†³æ–¹æ¡ˆ**:
```bash
# å®‰è£…XGBoost
pip install xgboost

# å®‰è£…CatBoost
pip install catboost

# å®‰è£…PyTorch (CPUç‰ˆæœ¬)
pip install torch

# æˆ–å®‰è£…GPUç‰ˆæœ¬
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118
```

**Fallbackæœºåˆ¶**: å¦‚æœä¾èµ–æœªå®‰è£…ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§ä½¿ç”¨LightGBM

### Q2: å¾®è§‚ç»“æ„UIæ— æ³•åŠ è½½

**é—®é¢˜**: æç¤º "å¾®è§‚ç»“æ„UIåŠ è½½å¤±è´¥"

**æ£€æŸ¥æ­¥éª¤**:
1. ç¡®è®¤æ–‡ä»¶å­˜åœ¨: `web/tabs/qlib_microstructure_tab.py`
2. ç¡®è®¤åç«¯æ–‡ä»¶å­˜åœ¨: `qlib_enhanced/high_frequency_engine.py`
3. æ£€æŸ¥å¯¼å…¥è·¯å¾„æ˜¯å¦æ­£ç¡®
4. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆç‚¹å‡»å±•å¼€"æŸ¥çœ‹è¯¦ç»†é”™è¯¯"ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```python
# æµ‹è¯•å¯¼å…¥
python -c "from web.tabs.qlib_microstructure_tab import render_microstructure_tab"
```

### Q3: Plotlyå›¾è¡¨ä¸æ˜¾ç¤º

**é—®é¢˜**: å¾®è§‚ç»“æ„UIä¸­å›¾è¡¨æ˜¾ç¤ºç©ºç™½

**è§£å†³æ–¹æ¡ˆ**:
```bash
# é‡æ–°å®‰è£…plotly
pip install --upgrade plotly

# æ¸…é™¤Streamlitç¼“å­˜
streamlit cache clear
```

---

## ğŸ“ ä»£ç ä¿®æ”¹è®°å½•

### ä¿®æ”¹1: æ·»åŠ æ¨¡å‹å®ç°æ–‡ä»¶

**æ–‡ä»¶**: æ–°å¢4ä¸ªæ–‡ä»¶
- `qlib_enhanced/model_zoo/models/__init__.py`
- `qlib_enhanced/model_zoo/models/xgboost_model.py`
- `qlib_enhanced/model_zoo/models/catboost_model.py`
- `qlib_enhanced/model_zoo/models/pytorch_models.py`

**ä¿®æ”¹**: `qlib_enhanced/model_zoo/model_trainer.py`
- æ›´æ–° `_create_model_instance()` æ–¹æ³•æ”¯æŒ11ä¸ªæ–°æ¨¡å‹

### ä¿®æ”¹2: åˆ›å»ºå¾®è§‚ç»“æ„UI

**æ–‡ä»¶**: æ–°å¢1ä¸ªæ–‡ä»¶
- `web/tabs/qlib_microstructure_tab.py` (753è¡Œ)

**ä¿®æ”¹**: `web/tabs/qlib_highfreq_tab.py`
- ç¬¬18è¡Œ: ä»3ä¸ªå­æ ‡ç­¾å¢åŠ åˆ°4ä¸ªå­æ ‡ç­¾
- ç¬¬23è¡Œ: æ·»åŠ  "ğŸ”¬ å¾®è§‚ç»“æ„å¯è§†åŒ–" æ ‡ç­¾
- ç¬¬35-45è¡Œ: æ·»åŠ å¾®è§‚ç»“æ„UIé›†æˆä»£ç 

---

## âœ… éªŒè¯æ¸…å•

ä½¿ç”¨ä»¥ä¸‹æ¸…å•éªŒè¯é›†æˆæ˜¯å¦æˆåŠŸï¼š

### æ¨¡å‹åº“æ‰©å±•
- [ ] èƒ½å¤Ÿè®¿é—® Qlib â†’ æ¨¡å‹è®­ç»ƒ â†’ æ¨¡å‹åº“
- [ ] èƒ½å¤Ÿçœ‹åˆ°12ä¸ªæ¨¡å‹é€‰é¡¹
- [ ] èƒ½å¤Ÿé€‰æ‹©XGBoostå¹¶é…ç½®å‚æ•°
- [ ] èƒ½å¤Ÿé€‰æ‹©LSTMå¹¶é…ç½®å‚æ•°
- [ ] è®­ç»ƒè¿›åº¦æ¡æ­£å¸¸æ˜¾ç¤º
- [ ] Fallbackæœºåˆ¶æ­£å¸¸å·¥ä½œï¼ˆä¾èµ–æœªå®‰è£…æ—¶é™çº§ï¼‰

### å¾®è§‚ç»“æ„UI
- [ ] èƒ½å¤Ÿè®¿é—® Qlib â†’ æŠ•èµ„ç»„åˆ â†’ é«˜é¢‘äº¤æ˜“ â†’ å¾®è§‚ç»“æ„å¯è§†åŒ–
- [ ] èƒ½å¤Ÿçœ‹åˆ°4ä¸ªå­åŠŸèƒ½æ ‡ç­¾
- [ ] è®¢å•ç°¿æ·±åº¦å›¾èƒ½æ­£å¸¸ç”Ÿæˆå’Œæ˜¾ç¤º
- [ ] ä»·å·®åˆ†æå›¾è¡¨èƒ½æ­£å¸¸æ˜¾ç¤º
- [ ] è®¢å•æµå¤±è¡¡å›¾è¡¨èƒ½æ­£å¸¸æ˜¾ç¤º
- [ ] ç»¼åˆæŒ‡æ ‡é›·è¾¾å›¾èƒ½æ­£å¸¸æ˜¾ç¤º
- [ ] æ‰€æœ‰Plotlyå›¾è¡¨å¯äº¤äº’ï¼ˆç¼©æ”¾ã€æ‚¬åœç­‰ï¼‰

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

### çŸ­æœŸï¼ˆå‰©ä½™2ä¸ªæ‰©å±•åŠŸèƒ½ï¼‰

#### 3. MLflowå®Œæ•´é›†æˆ (P3ä¼˜å…ˆçº§)
**é¢„è®¡å·¥ä½œé‡**: 1å¤©  
**å®ç°å†…å®¹**:
- æ¨¡å‹æ³¨å†Œæµç¨‹
- æ¨¡å‹ç‰ˆæœ¬ç®¡ç†UI
- éƒ¨ç½²çŠ¶æ€è¿½è¸ª
- å®éªŒå¯¹æ¯”å¯è§†åŒ–

**é›†æˆä½ç½®**: `unified_dashboard.py` â†’ `render_qlib_experiment_management_tab()`

#### 4. é«˜çº§é£é™©æŒ‡æ ‡ (P2ä¼˜å…ˆçº§)
**é¢„è®¡å·¥ä½œé‡**: 1-2å¤©  
**å®ç°å†…å®¹**:
- CVaRè®¡ç®—
- Expected Shortfall
- å°¾éƒ¨é£é™©åº¦é‡
- å‹åŠ›æµ‹è¯•åœºæ™¯æ‰©å±•

**é›†æˆä½ç½®**: `unified_dashboard.py` â†’ `render_qlib_risk_control_tab()`

---

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [æ‰©å±•åŠŸèƒ½å®ŒæˆæŠ¥å‘Š](./EXTENSION_FEATURES_COMPLETION_REPORT.md)
- [QlibåŠŸèƒ½å®Œæ•´æ€§æ£€æŸ¥](./QLIB_FUNCTIONALITY_COMPLETENESS_CHECK.md)
- [Phase 5-6å®ŒæˆæŠ¥å‘Š](./PHASE_5_COMPLETE_AND_PHASE_6_READY.md)
- [Unified Dashboardæºç ](../web/unified_dashboard.py)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-01-07  
**ç»´æŠ¤è€…**: AI Agent
