# ç«ä»·å†³ç­–ç³»ç»Ÿå®Œæ•´å·¥ä½œæµç¨‹æ¡†æ¶

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°äº†ç«ä»·å†³ç­–ç³»ç»Ÿä»æ•°æ®å‡†å¤‡åˆ°äº¤æ˜“æ‰§è¡Œçš„**å®Œæ•´ç«¯åˆ°ç«¯å·¥ä½œæµç¨‹**ï¼Œæ¶µç›–Qlibã€RD-Agentã€ç«ä»·å†³ç­–ç­‰æ‰€æœ‰æ¨¡å—çš„ååŒå·¥ä½œæœºåˆ¶ã€‚

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Qilin Stack ç«ä»·å†³ç­–ç³»ç»Ÿ                        â”‚
â”‚                        End-to-End Workflow                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“Š æ•°æ®å±‚          ğŸ§ª ç ”ç©¶å±‚          ğŸ¯ å†³ç­–å±‚          ğŸ’° æ‰§è¡Œå±‚
   â”‚                â”‚                â”‚                â”‚
   â”œâ”€ Qlibæ•°æ®      â”œâ”€ å› å­æŒ–æ˜      â”œâ”€ Tæ—¥ç­›é€‰       â”œâ”€ T+1ä¹°å…¥
   â”œâ”€ AKShare      â”œâ”€ ç‰¹å¾å·¥ç¨‹      â”œâ”€ T+1ç«ä»·       â”œâ”€ T+2å–å‡º
   â”œâ”€ Tushare      â”œâ”€ æ¨¡å‹è®­ç»ƒ      â”œâ”€ é£é™©è¯„ä¼°      â””â”€ ç»©æ•ˆåˆ†æ
   â””â”€ é«˜é¢‘æ•°æ®      â””â”€ æ¨¡å‹è¿›åŒ–      â””â”€ ä»“ä½ç®¡ç†
```

---

## ğŸ”„ Phase 1: æ•°æ®å‡†å¤‡ä¸å› å­ç ”å‘

### 1.1 æ•°æ®è·å–ä¸å­˜å‚¨

```mermaid
graph LR
    A[æ•°æ®æºé€‰æ‹©] --> B{Qlibå¯ç”¨?}
    B -->|æ˜¯| C[ä»Qlibè¯»å–]
    B -->|å¦| D{AKShareå¯ç”¨?}
    D -->|æ˜¯| E[ä»AKShareè¯»å–]
    D -->|å¦| F[ä½¿ç”¨Tushare]
    C --> G[æ•°æ®é¢„å¤„ç†]
    E --> G
    F --> G
    G --> H[ç‰¹å¾ç¼“å­˜]
    H --> I[æ•°æ®éªŒè¯]
    I --> J[å­˜å…¥PremiumDataProvider]
```

**æ¨¡å—ä½ç½®**:
- `data_layer/premium_data_provider.py` - ç»Ÿä¸€æ•°æ®æ¥å£
- `qlib_enhanced/multi_source_data.py` - å¤šæ•°æ®æºç®¡ç†
- `cache/feature_cache.py` - ç‰¹å¾ç¼“å­˜

**æ‰§è¡Œæ—¶æœº**: 
- **æ¯æ—¥ç›˜å** 15:30-16:00
- **æ•°æ®æ›´æ–°**: è‡ªåŠ¨å¢é‡æ›´æ–°

**é…ç½®é¡¹**:
```yaml
data_sources:
  priority: ["qlib", "akshare", "tushare"]
  cache_dir: "./data/cache"
  update_mode: "incremental"
```

---

### 1.2 å› å­æŒ–æ˜ï¼ˆRD-Agentï¼‰

```mermaid
graph TD
    A[å› å­åº“åˆå§‹åŒ–] --> B[åŸºç¡€å› å­æå–]
    B --> C[RD-Agentå› å­å‘ç°]
    C --> D[å› å­è¯„ä¼°IC]
    D --> E{IC > é˜ˆå€¼?}
    E -->|æ˜¯| F[åŠ å…¥å› å­æ± ]
    E -->|å¦| G[æ·˜æ±°å› å­]
    F --> H[å› å­ç»„åˆä¼˜åŒ–]
    G --> C
    H --> I[å› å­æƒé‡è®¡ç®—]
    I --> J[è¾“å‡ºåˆ°ä¸€è¿›äºŒæ¨¡å‹]
```

**æ¨¡å—ä½ç½®**:
- `rd_agent/factor_discovery_simple.py` - ç®€åŒ–ç‰ˆå› å­å‘ç°
- `rd_agent/llm_factor_discovery.py` - LLMé©±åŠ¨å› å­ç”Ÿæˆ
- `factors/limitup_advanced_factors.py` - é«˜çº§å› å­åº“
- `app/factor_optimizer.py` - å› å­ä¼˜åŒ–å™¨

**15ä¸ªé¢„å®šä¹‰æ ¸å¿ƒå› å­**:

| ID | å› å­åç§° | è¡¨è¾¾å¼ | é¢„æœŸIC | ç±»åˆ« |
|----|----------|--------|--------|------|
| limitup_001 | å°æ¿å¼ºåº¦ | å°å•é‡‘é¢/æµé€šå¸‚å€¼ | 0.08 | å°æ¿ç±» |
| limitup_002 | è¿æ¿é«˜åº¦ | log(è¿æ¿+1)*é‡æ¯” | 0.12 | è¿æ¿ç±» |
| limitup_003 | é¢˜æå…±æŒ¯ | åŒé¢˜ææ•°*ä¸ªè‚¡å¼ºåº¦ | 0.10 | é¢˜æç±» |
| limitup_004 | æ—©ç›˜æ¶¨åœ | 1-æ¶¨åœåˆ†é’Ÿ/240 | 0.15 | æ—¶æœºç±» |
| limitup_005 | é‡èƒ½çˆ†å‘ | æˆäº¤é‡/20æ—¥å‡é‡ | 0.09 | é‡èƒ½ç±» |
| limitup_006 | å¤§å•å‡€æµå…¥ | (å¤§ä¹°-å¤§å–)/æˆäº¤é¢ | 0.11 | èµ„é‡‘ç±» |
| limitup_007 | å°å•æŒç»­æ€§ | å°å•æŒç»­åˆ†é’Ÿ/240 | 0.07 | å°æ¿ç±» |
| limitup_008 | å¼€æ¿æƒ©ç½š | exp(-å¼€æ¿æ¬¡æ•°) | -0.06 | å°æ¿ç±» |
| limitup_009 | æ¢æ‰‹ç‡é€‚ä¸­ | 1-\|æ¢æ‰‹-æœ€ä¼˜\|/æœ€ä¼˜ | 0.08 | é‡èƒ½ç±» |
| limitup_010 | é¦–æ¿ä¼˜åŠ¿ | is_first*(1+é¢˜æ) | 0.14 | è¿æ¿ç±» |
| limitup_011 | å°¾ç›˜å°æ¿ | å°¾ç›˜é‡‘é¢/å¹³å‡é‡‘é¢ | 0.09 | å°æ¿ç±» |
| limitup_012 | å‡ä»·åç¦» | (æ”¶ç›˜-VWAP)/VWAP | 0.06 | æŠ€æœ¯ç±» |
| limitup_013 | å‰é«˜è·ç¦» | (å‰é«˜-å½“å‰)/å‰é«˜ | 0.05 | æŠ€æœ¯ç±» |
| limitup_014 | æ¿å—è”åŠ¨ | æ¿å—ç‡*èµ„é‡‘æµå…¥ | 0.13 | é¢˜æç±» |
| limitup_015 | ç«ä»·å¼ºåº¦ | ç«ä»·é‡/æµé€šå¸‚å€¼ | 0.10 | æ—¶æœºç±» |

**æ‰§è¡Œæ—¶æœº**:
- **å‘¨æœŸæ€§**: æ¯å‘¨æ—¥æ‰§è¡Œå› å­æŒ–æ˜
- **è§¦å‘å¼**: ç­–ç•¥æ€§èƒ½ä¸‹é™æ—¶è§¦å‘
- **æ‰‹åŠ¨å¼**: ç ”ç©¶äººå‘˜ä¸»åŠ¨å‘èµ·

---

### 1.3 ç‰¹å¾å·¥ç¨‹

```mermaid
graph LR
    A[åŸå§‹æ•°æ®] --> B[åŸºç¡€ç‰¹å¾]
    A --> C[é«˜é¢‘ç‰¹å¾]
    B --> D[ç‰¹å¾ç»„åˆ]
    C --> D
    D --> E[ç‰¹å¾ç­›é€‰]
    E --> F[ç‰¹å¾æ ‡å‡†åŒ–]
    F --> G[ç‰¹å¾å­˜å‚¨]
    
    subgraph åŸºç¡€ç‰¹å¾
    B1[ä»·æ ¼ç‰¹å¾] 
    B2[é‡èƒ½ç‰¹å¾]
    B3[æŠ€æœ¯æŒ‡æ ‡]
    end
    
    subgraph é«˜é¢‘ç‰¹å¾
    C1[å°å•å¼ºåº¦]
    C2[åˆ†æ—¶å½¢æ€]
    C3[å¤§å•æµå‘]
    end
```

**æ¨¡å—ä½ç½®**:
- `features/auction_features.py` - ç«ä»·ç‰¹å¾æå–
- `features/one_into_two_feature_builder.py` - ä¸€è¿›äºŒç‰¹å¾æ„å»º
- `qlib_enhanced/high_freq_limitup.py` - é«˜é¢‘æ¶¨åœåˆ†æ

**ç‰¹å¾ç±»å‹** (100+ç»´åº¦):

1. **Tæ—¥å°æ¿ç‰¹å¾** (20ç»´)
   - å°æ¿å¼ºåº¦ã€å°æ¿æ—¶é—´ã€å¼€æ¿æ¬¡æ•°
   - å°å•é‡‘é¢ã€å°å•æŒç»­æ—¶é—´
   - å°¾ç›˜å°å•å¼ºåº¦ã€å°æ¿è´¨é‡è¯„åˆ†

2. **å†å²ç«ä»·ç‰¹å¾** (15ç»´)
   - è¿‡å»Nå¤©å¹³å‡ç«ä»·æ¶¨å¹…
   - ç«ä»·æ³¢åŠ¨ç‡ã€ç«ä»·ä¸€è‡´æ€§
   - é«˜å¼€/ä½å¼€é¢‘ç‡

3. **å¸‚åœºç¯å¢ƒç‰¹å¾** (10ç»´)
   - å¸‚åœºæ¶¨åœæ•°ã€å¸‚åœºæƒ…ç»ª
   - æ¿å—æ¶¨åœæ•°ã€æ¿å—å¼ºåº¦

4. **è¿ç»­æ€§ç‰¹å¾** (15ç»´)
   - è¿ç»­ä¸Šæ¶¨å¤©æ•°ã€è¿æ¿é«˜åº¦
   - è¶‹åŠ¿å¼ºåº¦ã€åŠ¨é‡æŒ‡æ ‡

5. **é«˜é¢‘å¾®è§‚ç‰¹å¾** (40ç»´)
   - åˆ†é’Ÿçº§é‡èƒ½çˆ†å‘
   - å¤§å•æµå…¥èŠ‚å¥
   - å°å•ç¨³å®šæ€§ã€æˆäº¤èç¼©åº¦

---

## ğŸ“ Phase 2: æ¨¡å‹è®­ç»ƒä¸è¿›åŒ–

### 2.1 ä¸€è¿›äºŒæ¨¡å‹è®­ç»ƒæµç¨‹

```mermaid
graph TD
    A[å†å²æ•°æ®] --> B[æ ‡ç­¾ç”Ÿæˆ]
    B --> C1[Pool Label:<br/>Tæ—¥æ˜¯å¦æ¶¨åœ]
    B --> C2[Board Label:<br/>T+1æ˜¯å¦æ¶¨åœ]
    C1 --> D[ç‰¹å¾æå–]
    C2 --> D
    D --> E[æ•°æ®é›†åˆ’åˆ†]
    E --> F1[è®­ç»ƒé›†:60%]
    E --> F2[éªŒè¯é›†:20%]
    E --> F3[æµ‹è¯•é›†:20%]
    F1 --> G[é›†æˆæ¨¡å‹è®­ç»ƒ]
    F2 --> G
    G --> H1[LightGBM]
    G --> H2[XGBoost]
    G --> H3[CatBoost]
    H1 --> I[Stacking]
    H2 --> I
    H3 --> I
    I --> J[æ¨¡å‹æ ¡å‡†]
    J --> K[æ¨¡å‹è¯„ä¼°]
    K --> L{AUC>0.7?}
    L -->|æ˜¯| M[ä¿å­˜æ¨¡å‹]
    L -->|å¦| N[è°ƒå‚ä¼˜åŒ–]
    N --> G
    M --> O[SHAPè§£é‡Š]
    O --> P[ç‰¹å¾é‡è¦æ€§]
    P --> Q[æ›´æ–°Agentæƒé‡]
```

**æ¨¡å—ä½ç½®**:
- `qlib_enhanced/one_into_two_pipeline.py` - ä¸€è¿›äºŒè®­ç»ƒç®¡é“
- `scripts/pipeline_limitup_research.py` - ç ”ç©¶è®­ç»ƒè„šæœ¬
- `training/advanced_trainers.py` - é«˜çº§è®­ç»ƒå™¨
- `ml/model_explainer.py` - æ¨¡å‹è§£é‡Šå™¨

**è®­ç»ƒé…ç½®**:
```python
OneIntoTwoTrainer(
    top_n=20,                    # Top Né¢„æµ‹
    lookback_days=5,             # å†å²å›æº¯å¤©æ•°
    min_samples=1000,            # æœ€å°æ ·æœ¬æ•°
    cv_folds=5,                  # äº¤å‰éªŒè¯æŠ˜æ•°
    early_stopping_rounds=50     # æ—©åœè½®æ•°
)
```

**æ¨¡å‹æ€§èƒ½æŒ‡æ ‡**:
- **AUC**: >0.70 åˆæ ¼, >0.75 ä¼˜ç§€, >0.80 å“è¶Š
- **P@20**: Precision at Top 20, ç›®æ ‡>30%
- **Hit@20**: Hit Rate at Top 20, ç›®æ ‡>25%

---

### 2.2 æ¨¡å‹è¿›åŒ–ä¸ä¼˜åŒ–

```mermaid
graph LR
    A[åŸºç¡€æ¨¡å‹] --> B[åœ¨çº¿å­¦ä¹ ]
    B --> C[æ¦‚å¿µæ¼‚ç§»æ£€æµ‹]
    C --> D{æ£€æµ‹åˆ°æ¼‚ç§»?}
    D -->|æ˜¯| E[å¢é‡æ›´æ–°]
    D -->|å¦| F[ç»§ç»­ä½¿ç”¨]
    E --> G[å›°éš¾æ ·æœ¬æŒ–æ˜]
    G --> H[å¯¹æŠ—è®­ç»ƒ]
    H --> I[è¯¾ç¨‹å­¦ä¹ ]
    I --> J[çŸ¥è¯†è’¸é¦]
    J --> K[æ¨¡å‹è’¸é¦]
    K --> L[æ›´æ–°æ¨¡å‹]
    L --> B
```

**æ¨¡å—ä½ç½®**:
- `qlib_enhanced/online_learning.py` - åœ¨çº¿å­¦ä¹ ç®¡ç†
- `training/hard_case_mining.py` - å›°éš¾æ ·æœ¬æŒ–æ˜
- `training/adversarial_trainer.py` - å¯¹æŠ—è®­ç»ƒ
- `monitoring/drift_detector.py` - æ¼‚ç§»æ£€æµ‹

**è¿›åŒ–ç­–ç•¥**:

1. **åœ¨çº¿å­¦ä¹ ** (æ¯æ—¥)
   - å¢é‡æ›´æ–°ï¼šæ¯æ™šæ ¹æ®å½“æ—¥ç»“æœæ›´æ–°
   - ç¼“å†²æœºåˆ¶ï¼šç§¯ç´¯1000ç¬”åæ‰¹é‡æ›´æ–°
   - æ¼‚ç§»æ£€æµ‹ï¼šè‡ªåŠ¨æ£€æµ‹å¸‚åœºå˜åŒ–

2. **å›°éš¾æ ·æœ¬æŒ–æ˜** (æ¯å‘¨)
   - è¯†åˆ«é¢„æµ‹é”™è¯¯æ¡ˆä¾‹
   - ç”Ÿæˆå¯¹æŠ—æ ·æœ¬
   - é‡ç‚¹å¼ºåŒ–è®­ç»ƒ

3. **è¯¾ç¨‹å­¦ä¹ ** (æ¯æœˆ)
   - ä»ç®€å•åˆ°å¤æ‚æ¸è¿›è®­ç»ƒ
   - åŠ¨æ€è°ƒæ•´æ ·æœ¬æƒé‡
   - ç¡®ä¿ç¨³å®šæ”¶æ•›

4. **çŸ¥è¯†è’¸é¦** (æ¯å­£åº¦)
   - å¤§æ¨¡å‹â†’å°æ¨¡å‹çŸ¥è¯†è¿ç§»
   - ä¿æŒæ€§èƒ½æå‡æ¨ç†é€Ÿåº¦
   - ä¾¿äºå®ç›˜éƒ¨ç½²

---

## ğŸ¯ Phase 3: Tæ—¥å†³ç­–ä¸ç­›é€‰

### 3.1 Tæ—¥ç›˜åå®Œæ•´æµç¨‹ (15:30-16:00)

```mermaid
graph TD
    START[15:30 ç›˜åæ•°æ®] --> A1[è·å–æ¶¨åœè‚¡ç¥¨]
    A1 --> A2[å¸‚åœºç¯å¢ƒæ£€æŸ¥]
    A2 --> A3{å¸‚åœºç†”æ–­?}
    A3 -->|æ˜¯| SKIP[è·³è¿‡ç­›é€‰]
    A3 -->|å¦| B1[æå–åŸºç¡€ç‰¹å¾]
    
    B1 --> B2[é«˜é¢‘ç‰¹å¾åˆ†æ]
    B2 --> B3[ä¸€è¿›äºŒæ¨¡å‹é¢„æµ‹]
    B3 --> B4[å€™é€‰è‚¡è¯„åˆ†]
    
    B4 --> C1[ç¬¬ä¸€å±‚è¿‡æ»¤]
    C1 --> C2[å°æ¿å¼ºåº¦>3.0]
    C1 --> C3[æ¶¨åœæ—¶é—´<10:30]
    C1 --> C4[å¼€æ¿æ¬¡æ•°<=2]
    C1 --> C5[æ’é™¤STè‚¡]
    
    C2 --> D1[ç¬¬äºŒå±‚è¯„åˆ†]
    C3 --> D1
    C4 --> D1
    C5 --> D1
    
    D1 --> D2[è´¨é‡è¯„åˆ†>=85]
    D2 --> D3[æ¿å—åˆ†æ•£åº¦æ£€æŸ¥]
    D3 --> D4[å¸‚åœºæ¶¨åœæ•°>=30]
    
    D4 --> E1[æœ€ç»ˆæ’åº]
    E1 --> E2[é€‰æ‹©Top 10-30åª]
    E2 --> E3[ç”Ÿæˆç›‘æ§æ¸…å•]
    E3 --> E4[æ¨é€é€šçŸ¥]
    E4 --> END[ä¿å­˜å€™é€‰]
```

**å†³ç­–å¼•æ“**:
- `app/auction_decision_engine.py` - æ ¸å¿ƒå†³ç­–å¼•æ“
- `workflow/trading_workflow.py` - å·¥ä½œæµç¼–æ’

**ç­›é€‰æ ‡å‡†**:

| å±‚çº§ | æ¡ä»¶ | è¯´æ˜ | æ·˜æ±°ç‡ |
|------|------|------|--------|
| **åŸºç¡€è¿‡æ»¤** | å°æ¿å¼ºåº¦>3.0 | å°å•é‡‘é¢/æµé€šå¸‚å€¼ | 30% |
| | æ¶¨åœæ—¶é—´<10:30 | è¶Šæ—©è¶Šå¥½ | 20% |
| | å¼€æ¿æ¬¡æ•°<=2 | é¿å…çƒ‚æ¿ | 15% |
| | æ’é™¤STè‚¡ | é£é™©æ§åˆ¶ | 5% |
| **è´¨é‡è¯„åˆ†** | è¯„åˆ†>=85åˆ† | ç»¼åˆè´¨é‡ | 20% |
| | æ¿å—åˆ†æ•£åº¦ | HHI<0.5 | 5% |
| **å¸‚åœºç¯å¢ƒ** | æ¶¨åœæ•°>=30åª | å¸‚åœºæƒ…ç»ª | 5% |

**è¾“å‡º**:
```json
{
  "date": "2024-11-01",
  "candidates": [
    {
      "symbol": "000001.SZ",
      "name": "å¹³å®‰é“¶è¡Œ",
      "seal_strength": 5.2,
      "limitup_time": "09:45",
      "open_count": 0,
      "quality_score": 92.5,
      "prediction_score": 0.85,
      "recommended_action": "ç«ä»·ä¹°å…¥"
    }
  ],
  "total_candidates": 23,
  "market_limitup_count": 156,
  "market_sentiment": "æ´»è·ƒ"
}
```

---

### 3.2 ç«ä»·ç‰¹å¾æå–

```mermaid
graph LR
    A[Tæ—¥æ•°æ®] --> B[ç«ä»·é¢„æµ‹ç‰¹å¾]
    B --> C1[Tæ—¥å°å•ç‰¹å¾]
    B --> C2[å†å²ç«ä»·è¡¨ç°]
    B --> C3[å¸‚åœºç¯å¢ƒç‰¹å¾]
    B --> C4[è¿ç»­æ€§ç‰¹å¾]
    
    C1 --> D[ç‰¹å¾å·¥ç¨‹]
    C2 --> D
    C3 --> D
    C4 --> D
    
    D --> E[æ ‡å‡†åŒ–]
    E --> F[è¾“å…¥æ¨¡å‹]
```

**æ¨¡å—**: `features/auction_features.py`

---

## ğŸ’¹ Phase 4: T+1ç«ä»·ç›‘æ§ä¸ä¹°å…¥

### 4.1 T+1æ—¥ç«ä»·å®Œæ•´æµç¨‹ (09:15-09:30)

```mermaid
graph TD
    START[09:15 ç«ä»·å¼€å§‹] --> A1[åŠ è½½ç›‘æ§æ¸…å•]
    A1 --> A2[å®æ—¶ç«ä»·æ•°æ®]
    
    A2 --> B1[è®¡ç®—ç«ä»·å¼ºåº¦]
    B1 --> B2[ä¹°ç›˜å æ¯”]
    B1 --> B3[ç«ä»·é‡]
    B1 --> B4[ä»·æ ¼åç¦»]
    
    B2 --> C1[ç«ä»·å¼ºåº¦è¯„åˆ†]
    B3 --> C1
    B4 --> C1
    
    C1 --> D1{ç«ä»·å¼ºåº¦?}
    D1 -->|>85| E1[è¶…å¼º]
    D1 -->|70-85| E2[å¼ºåŠ¿]
    D1 -->|55-70| E3[ä¸­ç­‰]
    D1 -->|<55| E4[å¼±åŠ¿]
    
    E1 --> F1[ç«ä»·ä¹°å…¥]
    E2 --> F2[å¼€ç›˜è§‚å¯Ÿ]
    E3 --> F3[ç­‰å¾…å›è°ƒ]
    E4 --> F4[æ”¾å¼ƒ]
    
    F1 --> G1[Kellyä»“ä½è®¡ç®—]
    F2 --> G1
    F3 --> G1
    
    G1 --> H1[é£é™©è¯„ä¼°]
    H1 --> H2{é€šè¿‡é£æ§?}
    H2 -->|æ˜¯| I1[09:25 æäº¤è®¢å•]
    H2 -->|å¦| I2[å–æ¶ˆä¹°å…¥]
    
    I1 --> J1[09:30 å¼€ç›˜æ‰§è¡Œ]
    J1 --> J2[è®°å½•æˆäº¤]
    J2 --> END[æŒä»“ç›‘æ§]
```

**å…³é”®æ—¶é—´ç‚¹**:
- **09:15**: å¼€å§‹ç›‘æ§ç«ä»·æ•°æ®
- **09:20**: ä¸­æœŸè¯„ä¼°ï¼Œè°ƒæ•´ç­–ç•¥
- **09:24**: æœ€ç»ˆå†³ç­–
- **09:25**: æäº¤ç«ä»·è®¢å•
- **09:30**: å¼€ç›˜æ‰§è¡Œ/è§‚å¯Ÿ

**ç«ä»·å¼ºåº¦è®¡ç®—**:
```python
ç«ä»·å¼ºåº¦ = (
    ä¹°ç›˜å æ¯” * 0.35 +           # ä¹°å–åŠ›é‡å¯¹æ¯”
    ç«ä»·é‡/æµé€šå¸‚å€¼ * 0.25 +     # å‚ä¸åº¦
    ä»·æ ¼å¼ºåº¦ * 0.20 +           # ä»·æ ¼ä½ç½®
    å°å•é¢„æœŸ * 0.20             # å†å²è¡¨ç°
) * 100
```

---

### 4.2 åˆ†å±‚ä¹°å…¥ç­–ç•¥

```mermaid
graph TD
    A[ä¹°å…¥ä¿¡å·] --> B{ç«ä»·å¼ºåº¦}
    B -->|è¶…å¼º:>85| C1[Layer 1: ç«ä»·ä¹°å…¥]
    B -->|å¼ºåŠ¿:70-85| C2[Layer 2: å¼€ç›˜ä¹°å…¥]
    B -->|ä¸­ç­‰:55-70| C3[Layer 3: å›è°ƒä¹°å…¥]
    
    C1 --> D1[09:25æäº¤]
    C1 --> D2[ä»“ä½:10%]
    C1 --> D3[ä»·æ ¼:ç«ä»·ä»·+0.5%]
    
    C2 --> E1[09:30è§‚å¯Ÿ]
    C2 --> E2[ä»“ä½:8%]
    C2 --> E3[ä»·æ ¼:å¼€ç›˜ä»·-0.5%]
    
    C3 --> F1[ç­‰å¾…å›è°ƒ2-3%]
    C3 --> F2[ä»“ä½:5%]
    C3 --> F3[ä»·æ ¼:åˆ†æ‰¹å»ºä»“]
```

**æ¨¡å—**: `strategies/tiered_buy_strategy.py`

**åˆ†å±‚å‚æ•°**:

| å±‚çº§ | ç«ä»·å¼ºåº¦ | ä¹°å…¥æ—¶æœº | ä»“ä½æ¯”ä¾‹ | ä»·æ ¼ç­–ç•¥ |
|------|----------|----------|----------|----------|
| Layer 1 | >85 è¶…å¼º | ç«ä»·ä¹°å…¥ | 10% | ç«ä»·ä»·+0.5% |
| Layer 2 | 70-85 å¼ºåŠ¿ | å¼€ç›˜ä¹°å…¥ | 8% | å¼€ç›˜ä»·-0.5% |
| Layer 3 | 55-70 ä¸­ç­‰ | å›è°ƒä¹°å…¥ | 5% | åˆ†æ‰¹-2~3% |

---

### 4.3 Kellyä»“ä½ç®¡ç†

```mermaid
graph LR
    A[Kellyå…¬å¼] --> B[è®¡ç®—æœ€ä¼˜ä»“ä½]
    B --> C[f* = p*b-q / b * kelly_fraction]
    C --> D[åŠ¨æ€é£é™©è°ƒæ•´]
    D --> E1[æ³¢åŠ¨ç‡è°ƒæ•´]
    D --> E2[æµåŠ¨æ€§è°ƒæ•´]
    D --> E3[å›æ’¤è°ƒæ•´]
    D --> E4[Betaè°ƒæ•´]
    E1 --> F[æœ€ç»ˆä»“ä½]
    E2 --> F
    E3 --> F
    E4 --> F
    F --> G[é£é™©å¹³ä»·ç»„åˆä¼˜åŒ–]
    G --> H[è¾“å‡ºå„è‚¡ä»“ä½]
```

**æ¨¡å—**: `risk/kelly_position_manager.py`

**Kellyå…¬å¼**:
```python
f* = (p * b - q) / b * kelly_fraction

å…¶ä¸­:
f* = æœ€ä¼˜ä»“ä½æ¯”ä¾‹
p = èƒœç‡ (å†å²ç»Ÿè®¡)
b = èµ”ç‡ (å¹³å‡ç›ˆåˆ©/å¹³å‡äºæŸ)
q = 1 - p (è´¥ç‡)
kelly_fraction = 0.25 (ä¿å®ˆç³»æ•°)
```

**åŠ¨æ€è°ƒæ•´**:
```python
adjusted_position = base_position * (
    target_volatility / actual_volatility *      # æ³¢åŠ¨ç‡è°ƒæ•´
    liquidity_score *                            # æµåŠ¨æ€§è°ƒæ•´
    min(1.0, max_drawdown_limit / current_dd) *  # å›æ’¤è°ƒæ•´
    1.0 / max(0.5, min(1.5, beta))              # Betaè°ƒæ•´
)
```

---

## ğŸ“Š Phase 5: æŒä»“ç›‘æ§ä¸é£æ§

### 5.1 T+1ç›˜ä¸­ç›‘æ§ (09:30-15:00)

```mermaid
graph TD
    A[æŒä»“ç›‘æ§] --> B{å®æ—¶ç›‘æ§}
    B --> C1[ä»·æ ¼ç›‘æ§]
    B --> C2[ä»“ä½ç›‘æ§]
    B --> C3[é£é™©ç›‘æ§]
    
    C1 --> D1{è§¦å‘æ­¢æŸ?}
    D1 -->|æ˜¯:-7%| E1[ç«‹å³å–å‡º]
    D1 -->|å¦| F1[ç»§ç»­æŒæœ‰]
    
    C2 --> D2{ä»“ä½è¶…é™?}
    D2 -->|æ˜¯:>80%| E2[é™ä½ä»“ä½]
    D2 -->|å¦| F2[æ­£å¸¸]
    
    C3 --> D3[å¸‚åœºç†”æ–­æ£€æŸ¥]
    D3 --> D4{è§¦å‘ç†”æ–­?}
    D4 -->|æ˜¯| E3[ç´§æ€¥æ¸…ä»“]
    D4 -->|å¦| F3[æ­£å¸¸]
    
    E1 --> G[è®°å½•æ—¥å¿—]
    E2 --> G
    E3 --> G
    G --> H[æ›´æ–°åœ¨çº¿æ¨¡å‹]
```

**é£æ§å±‚çº§**:

1. **ä¸ªè‚¡é£æ§**
   - æ­¢æŸçº¿ï¼š-7%
   - æ­¢ç›ˆçº¿ï¼š+15%
   - å•ç¥¨ä»“ä½ä¸Šé™ï¼š10%

2. **ç»„åˆé£æ§**
   - æ€»ä»“ä½ä¸Šé™ï¼š80%
   - æœ€å¤§æŒä»“æ•°ï¼š10åª
   - HHIåˆ†æ•£åº¦ï¼š<0.2

3. **å¸‚åœºé£æ§** (MarketCircuitBreaker)
   - æŒ‡æ•°ä¸‹è·Œ>2%ï¼šé™ä»“30%
   - è·Œåœæ•°>30ï¼šé™ä»“50%
   - è¿ç»­äºæŸ3å¤©ï¼šæš‚åœäº¤æ˜“

**æ¨¡å—**:
- `risk/market_circuit_breaker.py` - å¸‚åœºç†”æ–­
- `backtest/extreme_market_handler.py` - æç«¯è¡Œæƒ…å¤„ç†

---

### 5.2 æç«¯è¡Œæƒ…5çº§ä¿æŠ¤

```mermaid
graph TD
    A[å¸‚åœºé£é™©è¯„ä¼°] --> B{ç»¼åˆé£é™©åˆ†æ•°}
    B -->|<30| C1[âœ…æ— é£é™©<br/>æ­£å¸¸æ‰§è¡Œ]
    B -->|30-50| C2[ğŸŸ¢ä½çº§<br/>æ§åˆ¶ä»“ä½]
    B -->|50-70| C3[ğŸŸ¡ä¸­çº§<br/>é€‚åº¦å‡ä»“]
    B -->|70-85| C4[ğŸŸ é«˜çº§<br/>å¤§å¹…å‡ä»“50%]
    B -->|>85| C5[ğŸ”´ç´§æ€¥<br/>ç«‹å³æ¸…ä»“]
    
    C1 --> D[è®°å½•çŠ¶æ€]
    C2 --> D
    C3 --> D
    C4 --> D
    C5 --> D
```

**é£é™©è¯„ä¼°ç»´åº¦**:
- æµåŠ¨æ€§é£é™© (0-100)
- æç«¯äº‹ä»¶é£é™© (0-100)
- ç³»ç»Ÿæ€§é£é™© (0-100)

---

## ğŸ’° Phase 6: T+2å–å‡ºæ‰§è¡Œ

### 6.1 T+2æ—¥å–å‡ºå®Œæ•´æµç¨‹ (09:25-09:35)

```mermaid
graph TD
    START[09:25 ç«ä»·] --> A1[è¯„ä¼°T+1è¡¨ç°]
    A1 --> B1{T+1æ¶¨è·Œå¹…?}
    
    B1 -->|>=9.5%æ¶¨åœ| C1[T+1æ¶¨åœ]
    B1 -->|5-9%å¤§æ¶¨| C2[T+1å¤§æ¶¨]
    B1 -->|0-5%å°æ¶¨| C3[T+1å°æ¶¨]
    B1 -->|<0%ä¸‹è·Œ| C4[T+1ä¸‹è·Œ]
    
    C1 --> D1{T+2å¼€ç›˜æ¶¨å¹…?}
    D1 -->|>5%é«˜å¼€| E1[å–å‡º50%]
    D1 -->|0-5%å¹³å¼€| E2[å…¨å–æ­¢ç›ˆ]
    D1 -->|<0%ä½å¼€| E3[å…¨å–æ­¢ç›ˆ]
    
    C2 --> E4[é«˜å¼€å–60%]
    C3 --> E5[å…¨å–å‡ºå±€]
    C4 --> E6[æ­¢æŸå…¨å–]
    
    E1 --> F[09:30æ‰§è¡Œ]
    E2 --> F
    E3 --> F
    E4 --> F
    E5 --> F
    E6 --> F
    
    F --> G[è®°å½•äº¤æ˜“]
    G --> H[åœ¨çº¿å­¦ä¹ æ›´æ–°]
    H --> END[å®Œæˆä¸€è½®]
```

**å–å‡ºç­–ç•¥çŸ©é˜µ**:

| T+1è¡¨ç° | T+2å¼€ç›˜ | å–å‡ºæ¯”ä¾‹ | ç­–ç•¥é€»è¾‘ |
|---------|---------|----------|----------|
| æ¶¨åœ(â‰¥9.5%) | é«˜å¼€>5% | 50% | é«˜å¼€å…‘ç°ä¸€åŠ |
| æ¶¨åœ(â‰¥9.5%) | å¹³å¼€0-5% | 100% | å…¨å–æ­¢ç›ˆ |
| æ¶¨åœ(â‰¥9.5%) | ä½å¼€<0% | 100% | å…¨å–æ­¢ç›ˆ |
| å¤§æ¶¨(5-9%) | é«˜å¼€>0% | 60% | é«˜å¼€å–60% |
| å¤§æ¶¨(5-9%) | ä½å¼€<0% | 100% | å…¨å– |
| å°æ¶¨(0-5%) | ä»»æ„ | 100% | å…¨å–å‡ºå±€ |
| ä¸‹è·Œ(<0%) | ä»»æ„ | 100% | æ­¢æŸå…¨å– |

**æ¨¡å—**: `strategies/t2_sell_strategy.py`

---

## ğŸ“ˆ Phase 7: äº¤æ˜“ååˆ†æä¸è¿›åŒ–

### 7.1 äº¤æ˜“æ—¥å¿—ä¸å¤ç›˜

```mermaid
graph LR
    A[äº¤æ˜“è®°å½•] --> B[ç»©æ•ˆè®¡ç®—]
    B --> C1[å•ç¬”æ”¶ç›Š]
    B --> C2[ç´¯è®¡æ”¶ç›Š]
    B --> C3[èƒœç‡ç»Ÿè®¡]
    B --> C4[å¤æ™®æ¯”ç‡]
    
    C1 --> D[ç”ŸæˆæŠ¥å‘Š]
    C2 --> D
    C3 --> D
    C4 --> D
    
    D --> E[æ¨é€é€šçŸ¥]
    D --> F[ä¿å­˜æ•°æ®åº“]
    F --> G[åœ¨çº¿å­¦ä¹ è¾“å…¥]
```

**æ¨¡å—**: `analysis/trading_journal.py`

**è®°å½•å†…å®¹**:
```python
@dataclass
class TradeRecord:
    date: str
    symbol: str
    name: str
    
    # Tæ—¥
    t_day_close: float
    seal_strength: float
    limitup_time: str
    quality_score: float
    
    # T+1ä¹°å…¥
    t1_auction_strength: float
    t1_buy_price: float
    t1_buy_volume: int
    t1_buy_amount: float
    t1_close: float
    t1_return: float
    
    # T+2å–å‡º
    t2_sell_price: float
    t2_sell_ratio: float
    t2_profit: float
    t2_return: float
    
    # æ€»ç»“
    total_return: float
    holding_days: int
    success: bool
```

---

### 7.2 åœ¨çº¿å­¦ä¹ è‡ªåŠ¨æ›´æ–°

```mermaid
graph TD
    A[äº¤æ˜“ç»“æœ] --> B[æå–ç‰¹å¾X]
    A --> C[æ ‡æ³¨æ ‡ç­¾y]
    B --> D[å¢é‡å­¦ä¹ ]
    C --> D
    D --> E{æ¦‚å¿µæ¼‚ç§»?}
    E -->|æ˜¯| F[é‡æ–°è®­ç»ƒ]
    E -->|å¦| G[å¢é‡æ›´æ–°]
    F --> H[ä¿å­˜æ–°æ¨¡å‹]
    G --> H
    H --> I[æ›´æ–°é¢„æµ‹å™¨]
```

**æ¨¡å—**: `qlib_enhanced/online_learning.py`

**æ›´æ–°é¢‘ç‡**:
- æ¯æ—¥å¢é‡ï¼šç§¯ç´¯åˆ°ç¼“å†²åŒº
- æ‰¹é‡æ›´æ–°ï¼š1000ç¬”è§¦å‘
- å…¨é‡é‡è®­ï¼šæ£€æµ‹åˆ°æ¼‚ç§»

---

## ğŸ”„ å®Œæ•´æ—¶é—´çº¿ï¼ˆ3æ—¥å‘¨æœŸï¼‰

```
Tæ—¥ (ä»Šå¤©)
â”œâ”€ 15:00 æ”¶ç›˜
â”œâ”€ 15:10 è·å–æ¶¨åœæ•°æ®
â”œâ”€ 15:15 ç‰¹å¾æå–
â”œâ”€ 15:20 æ¨¡å‹é¢„æµ‹
â”œâ”€ 15:25 å€™é€‰ç­›é€‰
â”œâ”€ 15:30 ç”Ÿæˆç›‘æ§æ¸…å•
â””â”€ 16:00 æ¨é€é€šçŸ¥

T+1æ—¥ (æ¬¡æ—¥)
â”œâ”€ 09:15 ç«ä»·ç›‘æ§å¼€å§‹
â”œâ”€ 09:20 ç«ä»·å¼ºåº¦è¯„ä¼°
â”œâ”€ 09:24 æœ€ç»ˆä¹°å…¥å†³ç­–
â”œâ”€ 09:25 æäº¤ç«ä»·è®¢å•
â”œâ”€ 09:30 å¼€ç›˜æ‰§è¡Œ
â”œâ”€ 10:00 æŒä»“ç›‘æ§
â”œâ”€ 14:00 ç›˜ä¸­é£æ§
â””â”€ 15:00 æ”¶ç›˜è¯„ä¼°

T+2æ—¥ (ç¬¬ä¸‰å¤©)
â”œâ”€ 09:15 è¯„ä¼°T+1è¡¨ç°
â”œâ”€ 09:20 ç”Ÿæˆå–å‡ºç­–ç•¥
â”œâ”€ 09:25 æäº¤å–å‡ºè®¢å•
â”œâ”€ 09:30 å¼€ç›˜æ‰§è¡Œ
â”œâ”€ 10:00 è®°å½•äº¤æ˜“
â”œâ”€ 15:00 ç›˜ååˆ†æ
â”œâ”€ 16:00 åœ¨çº¿å­¦ä¹ æ›´æ–°
â””â”€ 17:00 ç”ŸæˆæŠ¥å‘Š
```

---

## ğŸ”§ å…³é”®é…ç½®æ–‡ä»¶

### config/default_config.yaml

```yaml
# æ•°æ®é…ç½®
data:
  sources: ["qlib", "akshare", "tushare"]
  cache_dir: "./data/cache"
  update_mode: "incremental"

# ç­›é€‰é…ç½®
screening:
  min_seal_strength: 3.0
  min_prediction_score: 0.6
  max_candidates: 30
  min_limitup_time: "10:30:00"
  max_open_count: 2
  min_quality_score: 85
  exclude_st: true

# ç«ä»·é…ç½®
auction:
  min_auction_strength: 0.6
  monitor_start_time: "09:15"
  monitor_end_time: "09:25"
  strength_levels:
    super_strong: 85
    strong: 70
    medium: 55

# ä¹°å…¥é…ç½®
buy:
  total_capital: 1000000
  max_position_per_stock: 0.10
  max_total_position: 0.80
  enable_layered_buy: true
  layers:
    layer1: {strength: 85, position: 0.10, timing: "auction"}
    layer2: {strength: 70, position: 0.08, timing: "open"}
    layer3: {strength: 55, position: 0.05, timing: "pullback"}

# å–å‡ºé…ç½®
sell:
  profit_target: 0.05
  stop_loss: -0.07
  enable_partial_sell: true
  rules:
    t1_limitup_t2_high_open: 0.50
    t1_big_gain_t2_continue: 0.60
    t1_small_gain: 1.00
    t1_loss: 1.00

# Kellyä»“ä½é…ç½®
kelly:
  enable_kelly: true
  kelly_fraction: 0.25
  max_kelly_position: 0.15
  min_kelly_position: 0.03

# å¸‚åœºç†”æ–­é…ç½®
market_breaker:
  enable_breaker: true
  index_drop_threshold: -0.02
  limitdown_count_threshold: 30
  continuous_loss_threshold: 3

# åœ¨çº¿å­¦ä¹ é…ç½®
online_learning:
  enable: true
  update_frequency: "daily"
  drift_threshold: 0.05
  buffer_size: 1000

# é€šçŸ¥é…ç½®
notification:
  enable_notification: true
  channels: ["wechat", "dingtalk", "email"]

# è°ƒåº¦é…ç½®
scheduler:
  enable_scheduler: true
  t_day_screening_time: "15:30"
  t1_auction_monitor_time: "09:15"
  t2_sell_time: "09:30"
  timezone: "Asia/Shanghai"
```

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### 1. æ•°æ®å±‚æ”¹è¿›

**ç°çŠ¶é—®é¢˜**:
- æ•°æ®æºåˆ‡æ¢ä¸å¤Ÿæ™ºèƒ½
- ç¼ºå°‘æ•°æ®è´¨é‡ç›‘æ§
- é«˜é¢‘æ•°æ®è·å–å›°éš¾

**å»ºè®®æ–¹æ¡ˆ**:
```python
# æ™ºèƒ½æ•°æ®è·¯ç”±
class SmartDataRouter:
    def get_data(self, symbol, date):
        # 1. å°è¯•æœ¬åœ°ç¼“å­˜
        if cached := self.cache.get(symbol, date):
            return cached
        
        # 2. è¯„ä¼°å„æ•°æ®æºè´¨é‡åˆ†æ•°
        scores = {
            'qlib': self.evaluate_qlib_quality(),
            'akshare': self.evaluate_akshare_quality(),
            'tushare': self.evaluate_tushare_quality()
        }
        
        # 3. é€‰æ‹©æœ€ä½³æ•°æ®æº
        best_source = max(scores, key=scores.get)
        return self.fetch_from(best_source, symbol, date)
```

### 2. å› å­æŒ–æ˜å¢å¼º

**ç°çŠ¶é—®é¢˜**:
- RD-Agenté›†æˆä¸å¤Ÿæ·±å…¥
- å› å­è¯„ä¼°å‘¨æœŸè¾ƒé•¿
- ç¼ºå°‘å› å­è‡ªåŠ¨æ·˜æ±°æœºåˆ¶

**å»ºè®®æ–¹æ¡ˆ**:
```python
# å› å­ç”Ÿå‘½å‘¨æœŸç®¡ç†
class FactorLifecycleManager:
    def evaluate_factor(self, factor_id):
        # è®¡ç®—æ»šåŠ¨IC
        ic_series = self.calculate_rolling_ic(factor_id, window=20)
        
        # è¡°é€€æ£€æµ‹
        if ic_series.recent_mean < ic_series.historical_mean * 0.5:
            self.mark_as_deprecated(factor_id)
        
        # è‡ªåŠ¨æƒé‡è°ƒæ•´
        self.adjust_weight(factor_id, ic_series.recent_mean)
```

### 3. æ¨¡å‹è®­ç»ƒä¼˜åŒ–

**ç°çŠ¶é—®é¢˜**:
- è®­ç»ƒæ•°æ®å¯èƒ½ä¸è¶³
- ç‰¹å¾å·¥ç¨‹è¾ƒæ‰‹å·¥
- æ¨¡å‹æ›´æ–°ä¸å¤ŸåŠæ—¶

**å»ºè®®æ–¹æ¡ˆ**:
```python
# AutoMLè‡ªåŠ¨åŒ–è®­ç»ƒ
class AutoTrainer:
    def auto_train(self, data):
        # 1. è‡ªåŠ¨ç‰¹å¾å·¥ç¨‹
        features = self.auto_feature_engineering(data)
        
        # 2. è‡ªåŠ¨æ¨¡å‹é€‰æ‹©
        best_model = self.auto_model_selection(features)
        
        # 3. è‡ªåŠ¨è¶…å‚æ•°ä¼˜åŒ–
        optimized_model = self.auto_hyperparameter_tuning(best_model)
        
        # 4. è‡ªåŠ¨éªŒè¯
        if self.validate(optimized_model):
            self.deploy(optimized_model)
```

### 4. ç«ä»·å†³ç­–å¢å¼º

**ç°çŠ¶é—®é¢˜**:
- ç«ä»·æ•°æ®å®æ—¶æ€§ä¾èµ–å¤–éƒ¨
- ç«ä»·å¼ºåº¦è®¡ç®—è¾ƒç®€å•
- ç¼ºå°‘ç›˜å£æ·±åº¦åˆ†æ

**å»ºè®®æ–¹æ¡ˆ**:
```python
# å¢å¼ºç«ä»·åˆ†æ
class EnhancedAuctionAnalyzer:
    def analyze(self, symbol, realtime_data):
        # 1. ç›˜å£æ·±åº¦åˆ†æ
        depth_score = self.analyze_market_depth(realtime_data)
        
        # 2. å¤§å•æµå‘åˆ†æ
        flow_score = self.analyze_order_flow(realtime_data)
        
        # 3. æœºæ„è¡Œä¸ºè¯†åˆ«
        institution_score = self.detect_institution_behavior(realtime_data)
        
        # ç»¼åˆè¯„åˆ†
        return self.ç»¼åˆè¯„åˆ†(depth_score, flow_score, institution_score)
```

### 5. é£æ§ä½“ç³»å®Œå–„

**ç°çŠ¶é—®é¢˜**:
- é£æ§è§„åˆ™è¾ƒå›ºå®š
- ç¼ºå°‘åŠ¨æ€æ­¢æŸ
- ç»„åˆé£é™©è¯„ä¼°ä¸è¶³

**å»ºè®®æ–¹æ¡ˆ**:
```python
# åŠ¨æ€é£æ§ç³»ç»Ÿ
class DynamicRiskManager:
    def adjust_risk_params(self, market_state, portfolio):
        # 1. å¸‚åœºçŠ¶æ€è¯†åˆ«
        regime = self.identify_market_regime(market_state)
        
        # 2. åŠ¨æ€è°ƒæ•´æ­¢æŸ
        if regime == MarketRegime.HIGH_VOLATILITY:
            self.tighten_stop_loss()
        
        # 3. ç»„åˆç›¸å…³æ€§ç›‘æ§
        if self.portfolio_correlation() > 0.7:
            self.reduce_positions()
        
        # 4. VaRå®æ—¶è®¡ç®—
        var = self.calculate_var(portfolio)
        if var > self.var_limit:
            self.trigger_risk_reduction()
```

### 6. å®ç›˜å¯¹æ¥

**ç°çŠ¶é—®é¢˜**:
- ç›®å‰ä¸ºæ¨¡æ‹Ÿäº¤æ˜“
- ç¼ºå°‘åˆ¸å•†APIå¯¹æ¥
- ç¼ºå°‘å®ç›˜æ»‘ç‚¹å¤„ç†

**å»ºè®®æ–¹æ¡ˆ**:
```python
# å®ç›˜äº¤æ˜“é€‚é…å™¨
class LiveTradingAdapter:
    def place_order(self, symbol, price, volume):
        # 1. é¢„æ»‘ç‚¹è°ƒæ•´
        adjusted_price = self.adjust_for_slippage(price, volume)
        
        # 2. åˆ†æ‰¹ä¸‹å•
        orders = self.split_order(volume, adjusted_price)
        
        # 3. æ‰§è¡Œå¹¶ç›‘æ§
        results = []
        for order in orders:
            result = self.broker_api.place_order(order)
            results.append(result)
        
        return self.aggregate_results(results)
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡è¿½è¸ª

### å…³é”®æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | å½“å‰ | æ”¹è¿›ç©ºé—´ |
|------|------|------|----------|
| **é¢„æµ‹æŒ‡æ ‡** | | | |
| æ¨¡å‹AUC | >0.75 | 0.72 | +3% |
| P@20 | >35% | 30% | +5% |
| Hit@20 | >30% | 25% | +5% |
| **æ‰§è¡ŒæŒ‡æ ‡** | | | |
| æˆäº¤ç‡ | >70% | 68% | +2% |
| å¹³å‡æ»‘ç‚¹ | <0.5% | 0.6% | +17% |
| **æ”¶ç›ŠæŒ‡æ ‡** | | | |
| å¹´åŒ–æ”¶ç›Š | >30% | 28% | +2% |
| å¤æ™®æ¯”ç‡ | >1.5 | 1.4 | +7% |
| æœ€å¤§å›æ’¤ | <15% | 12% | âœ“ |
| **é£æ§æŒ‡æ ‡** | | | |
| å•æ—¥æœ€å¤§äºæŸ | <-5% | -3.2% | âœ“ |
| è¿ç»­äºæŸå¤©æ•° | <5å¤© | 3å¤© | âœ“ |

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. **çŸ­æœŸï¼ˆ1ä¸ªæœˆï¼‰**
   - [ ] å®Œå–„æ•°æ®è´¨é‡ç›‘æ§
   - [ ] ä¼˜åŒ–ç«ä»·å¼ºåº¦ç®—æ³•
   - [ ] å¢åŠ æ›´å¤šé£æ§è§„åˆ™

2. **ä¸­æœŸï¼ˆ3ä¸ªæœˆï¼‰**
   - [ ] å®ç°AutoMLè®­ç»ƒ
   - [ ] æ·±åº¦é›†æˆRD-Agent
   - [ ] å¼€å‘å®ç›˜äº¤æ˜“é€‚é…å™¨

3. **é•¿æœŸï¼ˆ6ä¸ªæœˆï¼‰**
   - [ ] å¤šç­–ç•¥ç»„åˆç®¡ç†
   - [ ] è·¨å¸‚åœºç­–ç•¥æ‰©å±•
   - [ ] äº‘ç«¯åˆ†å¸ƒå¼è®­ç»ƒ

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ç«ä»·å†³ç­–é›†æˆæ–‡æ¡£](AUCTION_DECISION_INTEGRATION.md)
- [ä¸€è¿›äºŒç­–ç•¥æ–‡æ¡£](ONE_INTO_TWO_STRATEGY.md)
- [é£æ§ç³»ç»Ÿæ–‡æ¡£](RISK_MANAGEMENT.md)
- [ç³»ç»Ÿæ¶æ„æ–‡æ¡£](Technical_Architecture_v2.1_Final.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024-11-01  
**ç»´æŠ¤è€…**: Qilin Quant Team
